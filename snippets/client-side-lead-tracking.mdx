import DubClientInstall from "/snippets/dub-client-install.mdx";

## Installation

<Steps>

<Step title="Generate your publishable key">

Before you can track leads on the client-side, you need to generate a publishable key from your Dub workspace.

To do that, navigate to your [workspace's Analytics settings page](https://app.dub.co/settings/analytics) and generate a new publishable key under the **Publishable Key** section.

<Frame>
  <img
    src="/images/conversions/publishable-key.png"
    alt="Enabling conversion tracking for a workspace"
  />
</Frame>

</Step>

<Step title="Allowlist your site's domain">

Then, you'll need to allowlist your site's domain to allow the client-side conversion events to be ingested by Dub.

To do that, navigate to your [workspace's Analytics settings page](https://app.dub.co/settings/analytics) and add your site's domain to the **Allowed Hostnames** list.

This provides an additional layer of security by ensuring only authorized domains can track conversions using your publishable key.

<Frame>
  <img
    src="/images/conversions/allowed-hostnames.png"
    alt="Enabling conversion tracking for a workspace"
  />
</Frame>

You can group your hostnames when adding them to the allow list:

- `example.com`: Tracks traffic **only** from `example.com`.
- `*.example.com`: Tracks traffic from **all subdomains** of `example.com`, but **not** from `example.com` itself.

<Tip>
  When testing things out locally, you can add `localhost` to the **Allowed
  Hostnames** list temporarily. This will allow local events to be ingested by
  Dub. Don't forget to remove it once you're ready to go live!
</Tip>

</Step>

<Step title="Install @dub/analytics package">

Next, install the Dub analytics script in your application.

<DubClientInstall />

You must configure the **publishable key** you generated in step 1 when installing the analytics script. Without this key, client-side lead tracking will not work.

<CodeGroup>

```typescript React
import { Analytics as DubAnalytics } from '@dub/analytics/react';

export default function RootLayout({
  children,
}) {
  return (
    <html lang="en">
      <body className={inter.className}>{children}</body>
      <DubAnalytics
        ...
        publishableKey="dub_pk_xxxxxxxx" // Replace with your publishable key
      />
    </html>
  );
}
```

```html Other
<script>
  !(function (c, n) { 
    c[n] = c[n] || function () { (c[n].q = c[n].q || []).push(arguments); }; 
    ["trackClick","trackLead","trackSale"].forEach(t => c[n][t] = (...a) => c[n](t, ...a)); 
    var s=document.createElement("script"); s.defer=1; s.src="https://dubcdn.com/analytics/script.conversion-tracking.js"; 
    s.setAttribute("data-publishable-key","dub_pk_xxxxxxxx"); // Replace with your publishable key
    document.head.appendChild(s); 
  })(window, "dubAnalytics");
</script>
```

</CodeGroup>

</Step>

<Step title="Track the lead events">

Once the analytics script is installed, you can start tracking lead events in your application on the client-side.

<CodeGroup>

```typescript React
import { useAnalytics } from "@dub/analytics";
import { useState } from "react";

export function SignUpForm() {
  const { trackLead } = useAnalytics();
  const [name, setName] = useState("");
  const [email, setEmail] = useState("");

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();

    // Track the lead event
    trackLead({
      eventName: "Sign Up",
      customerExternalId: email,
      customerName: name,
      customerEmail: email,
    });
  };

  return (
    <form onSubmit={handleSubmit}>
      <input type="text" value={name} onChange={(e) => setName(e.target.value)} required />
      <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} required />
      <button type="submit">Sign Up</button>
    </form>
  );
}
```

```html Other
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up</title>
  </head>
  <body>
    <form id="signupForm">
      <input type="text" id="name" required />
      <input type="email" id="email" required />
      <button type="submit">Sign Up</button>
    </form>

    <script>
      document.getElementById("signupForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;

        // Track the lead event
        dubAnalytics.trackLead({
          eventName: "Sign Up",
          customerExternalId: email,
          customerName: name,
          customerEmail: email,
        });
      });
    </script>
  </body>
</html>
```

</CodeGroup>

</Step>

</Steps>